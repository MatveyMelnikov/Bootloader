ARM GAS  /tmp/ccNW2L4w.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"bootloader_io.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "External/bootloader/Src/bootloader_io.c"
  18              		.section	.text.bootloader_io_read,"ax",%progbits
  19              		.align	1
  20              		.global	bootloader_io_read
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	bootloader_io_read:
  26              	.LVL0:
  27              	.LFB67:
   1:External/bootloader/Src/bootloader_io.c **** #include "bootloader_io.h"
   2:External/bootloader/Src/bootloader_io.c **** #include "stm32f1xx.h"
   3:External/bootloader/Src/bootloader_io.c **** #include "stm32f1xx_hal_uart.h"
   4:External/bootloader/Src/bootloader_io.c **** #include <stdbool.h>
   5:External/bootloader/Src/bootloader_io.c **** 
   6:External/bootloader/Src/bootloader_io.c **** extern UART_HandleTypeDef *bootloader_uart;
   7:External/bootloader/Src/bootloader_io.c **** 
   8:External/bootloader/Src/bootloader_io.c **** // Static functions ----------------------------------------------------------
   9:External/bootloader/Src/bootloader_io.c **** 
  10:External/bootloader/Src/bootloader_io.c **** static bool is_address_in_bounds(const uint32_t address)
  11:External/bootloader/Src/bootloader_io.c **** {
  12:External/bootloader/Src/bootloader_io.c ****   return !(
  13:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
  14:External/bootloader/Src/bootloader_io.c ****     address + sizeof(uint16_t) >= FLASH_BANK1_END
  15:External/bootloader/Src/bootloader_io.c ****   );
  16:External/bootloader/Src/bootloader_io.c **** }
  17:External/bootloader/Src/bootloader_io.c **** 
  18:External/bootloader/Src/bootloader_io.c **** static bool is_page_address(const uint32_t address)
  19:External/bootloader/Src/bootloader_io.c **** {
  20:External/bootloader/Src/bootloader_io.c ****   // 128 pages
  21:External/bootloader/Src/bootloader_io.c ****   return (
  22:External/bootloader/Src/bootloader_io.c ****     address % 1024 == 0|| 
  23:External/bootloader/Src/bootloader_io.c ****     address + 1024 < FLASH_BANK1_END // flash bank1 end
  24:External/bootloader/Src/bootloader_io.c ****   );
  25:External/bootloader/Src/bootloader_io.c **** }
  26:External/bootloader/Src/bootloader_io.c **** 
  27:External/bootloader/Src/bootloader_io.c **** // Implementations -----------------------------------------------------------
  28:External/bootloader/Src/bootloader_io.c **** 
  29:External/bootloader/Src/bootloader_io.c **** bootloader_status bootloader_io_read(
  30:External/bootloader/Src/bootloader_io.c ****   uint8_t *const data,
  31:External/bootloader/Src/bootloader_io.c ****   const uint16_t size
ARM GAS  /tmp/ccNW2L4w.s 			page 2


  32:External/bootloader/Src/bootloader_io.c **** )
  33:External/bootloader/Src/bootloader_io.c **** {
  28              		.loc 1 33 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  34:External/bootloader/Src/bootloader_io.c ****   return (bootloader_status)HAL_UART_Receive(
  33              		.loc 1 34 3 view .LVU1
  33:External/bootloader/Src/bootloader_io.c ****   return (bootloader_status)HAL_UART_Receive(
  34              		.loc 1 33 1 is_stmt 0 view .LVU2
  35 0000 0A46     		mov	r2, r1
  36              		.loc 1 34 29 view .LVU3
  37 0002 0146     		mov	r1, r0
  38              	.LVL1:
  39              		.loc 1 34 29 view .LVU4
  40 0004 0248     		ldr	r0, .L2
  41              	.LVL2:
  42              		.loc 1 34 29 view .LVU5
  43 0006 4FF4FA73 		mov	r3, #500
  44 000a 0068     		ldr	r0, [r0]
  45 000c FFF7FEBF 		b	HAL_UART_Receive
  46              	.LVL3:
  47              	.L3:
  48              		.loc 1 34 29 view .LVU6
  49              		.align	2
  50              	.L2:
  51 0010 00000000 		.word	bootloader_uart
  52              		.cfi_endproc
  53              	.LFE67:
  55              		.section	.text.bootloader_io_write,"ax",%progbits
  56              		.align	1
  57              		.global	bootloader_io_write
  58              		.syntax unified
  59              		.thumb
  60              		.thumb_func
  62              	bootloader_io_write:
  63              	.LVL4:
  64              	.LFB68:
  35:External/bootloader/Src/bootloader_io.c ****     bootloader_uart,
  36:External/bootloader/Src/bootloader_io.c ****     (uint8_t*)data,
  37:External/bootloader/Src/bootloader_io.c ****     size,
  38:External/bootloader/Src/bootloader_io.c ****     UART_DELAY
  39:External/bootloader/Src/bootloader_io.c ****   );
  40:External/bootloader/Src/bootloader_io.c **** }
  41:External/bootloader/Src/bootloader_io.c **** 
  42:External/bootloader/Src/bootloader_io.c **** bootloader_status bootloader_io_write(
  43:External/bootloader/Src/bootloader_io.c ****   const uint8_t *const data,
  44:External/bootloader/Src/bootloader_io.c ****   const uint16_t size
  45:External/bootloader/Src/bootloader_io.c **** )
  46:External/bootloader/Src/bootloader_io.c **** {
  65              		.loc 1 46 1 is_stmt 1 view -0
  66              		.cfi_startproc
  67              		@ args = 0, pretend = 0, frame = 0
  68              		@ frame_needed = 0, uses_anonymous_args = 0
  69              		@ link register save eliminated.
  47:External/bootloader/Src/bootloader_io.c ****   return (bootloader_status)HAL_UART_Transmit(
ARM GAS  /tmp/ccNW2L4w.s 			page 3


  70              		.loc 1 47 3 view .LVU8
  46:External/bootloader/Src/bootloader_io.c ****   return (bootloader_status)HAL_UART_Transmit(
  71              		.loc 1 46 1 is_stmt 0 view .LVU9
  72 0000 0A46     		mov	r2, r1
  73              		.loc 1 47 29 view .LVU10
  74 0002 0146     		mov	r1, r0
  75              	.LVL5:
  76              		.loc 1 47 29 view .LVU11
  77 0004 0248     		ldr	r0, .L5
  78              	.LVL6:
  79              		.loc 1 47 29 view .LVU12
  80 0006 4FF4FA73 		mov	r3, #500
  81 000a 0068     		ldr	r0, [r0]
  82 000c FFF7FEBF 		b	HAL_UART_Transmit
  83              	.LVL7:
  84              	.L6:
  85              		.loc 1 47 29 view .LVU13
  86              		.align	2
  87              	.L5:
  88 0010 00000000 		.word	bootloader_uart
  89              		.cfi_endproc
  90              	.LFE68:
  92              		.section	.text.bootloader_io_get_dev_id,"ax",%progbits
  93              		.align	1
  94              		.global	bootloader_io_get_dev_id
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  99              	bootloader_io_get_dev_id:
 100              	.LFB69:
  48:External/bootloader/Src/bootloader_io.c ****     bootloader_uart,
  49:External/bootloader/Src/bootloader_io.c ****     (uint8_t*)data,
  50:External/bootloader/Src/bootloader_io.c ****     size,
  51:External/bootloader/Src/bootloader_io.c ****     UART_DELAY
  52:External/bootloader/Src/bootloader_io.c ****   );
  53:External/bootloader/Src/bootloader_io.c **** }
  54:External/bootloader/Src/bootloader_io.c **** 
  55:External/bootloader/Src/bootloader_io.c **** uint32_t bootloader_io_get_dev_id()
  56:External/bootloader/Src/bootloader_io.c **** {
 101              		.loc 1 56 1 is_stmt 1 view -0
 102              		.cfi_startproc
 103              		@ args = 0, pretend = 0, frame = 0
 104              		@ frame_needed = 0, uses_anonymous_args = 0
 105              		@ link register save eliminated.
  57:External/bootloader/Src/bootloader_io.c ****   return HAL_GetDEVID();
 106              		.loc 1 57 3 view .LVU15
 107              		.loc 1 57 10 is_stmt 0 view .LVU16
 108 0000 FFF7FEBF 		b	HAL_GetDEVID
 109              	.LVL8:
 110              		.cfi_endproc
 111              	.LFE69:
 113              		.section	.text.bootloader_io_program,"ax",%progbits
 114              		.align	1
 115              		.global	bootloader_io_program
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
ARM GAS  /tmp/ccNW2L4w.s 			page 4


 120              	bootloader_io_program:
 121              	.LVL9:
 122              	.LFB70:
  58:External/bootloader/Src/bootloader_io.c **** }
  59:External/bootloader/Src/bootloader_io.c **** 
  60:External/bootloader/Src/bootloader_io.c **** bootloader_status bootloader_io_program(
  61:External/bootloader/Src/bootloader_io.c ****   const uint32_t address,
  62:External/bootloader/Src/bootloader_io.c ****   const uint16_t data
  63:External/bootloader/Src/bootloader_io.c **** )
  64:External/bootloader/Src/bootloader_io.c **** {
 123              		.loc 1 64 1 is_stmt 1 view -0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
  65:External/bootloader/Src/bootloader_io.c ****   // 128 pages
  66:External/bootloader/Src/bootloader_io.c ****   if (!is_address_in_bounds(address))
 127              		.loc 1 66 3 view .LVU18
 128              	.LBB4:
 129              	.LBI4:
  10:External/bootloader/Src/bootloader_io.c **** {
 130              		.loc 1 10 13 view .LVU19
 131              	.LBB5:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 132              		.loc 1 12 3 view .LVU20
 133              	.LBE5:
 134              	.LBE4:
  64:External/bootloader/Src/bootloader_io.c ****   // 128 pages
 135              		.loc 1 64 1 is_stmt 0 view .LVU21
 136 0000 38B5     		push	{r3, r4, r5, lr}
 137              	.LCFI0:
 138              		.cfi_def_cfa_offset 16
 139              		.cfi_offset 3, -16
 140              		.cfi_offset 4, -12
 141              		.cfi_offset 5, -8
 142              		.cfi_offset 14, -4
 143              	.LBB9:
 144              	.LBB6:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 145              		.loc 1 12 10 view .LVU22
 146 0002 0D4B     		ldr	r3, .L12
 147              	.LBE6:
 148              	.LBE9:
  64:External/bootloader/Src/bootloader_io.c ****   // 128 pages
 149              		.loc 1 64 1 view .LVU23
 150 0004 0446     		mov	r4, r0
 151              	.LBB10:
 152              	.LBB7:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 153              		.loc 1 12 10 view .LVU24
 154 0006 9842     		cmp	r0, r3
 155              	.LBE7:
 156              	.LBE10:
  64:External/bootloader/Src/bootloader_io.c ****   // 128 pages
 157              		.loc 1 64 1 view .LVU25
 158 0008 0D46     		mov	r5, r1
 159              	.LBB11:
 160              	.LBB8:
ARM GAS  /tmp/ccNW2L4w.s 			page 5


  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 161              		.loc 1 12 10 view .LVU26
 162 000a 12D3     		bcc	.L11
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 163              		.loc 1 12 10 discriminator 1 view .LVU27
 164 000c 0B4B     		ldr	r3, .L12+4
  14:External/bootloader/Src/bootloader_io.c ****   );
 165              		.loc 1 14 13 view .LVU28
 166 000e 821C     		adds	r2, r0, #2
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 167              		.loc 1 12 10 discriminator 1 view .LVU29
 168 0010 9A42     		cmp	r2, r3
 169 0012 0ED2     		bcs	.L11
 170              	.LVL10:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 171              		.loc 1 12 10 discriminator 1 view .LVU30
 172              	.LBE8:
 173              	.LBE11:
  67:External/bootloader/Src/bootloader_io.c ****     return BOOTLOADER_BOUNDS_ERROR;
  68:External/bootloader/Src/bootloader_io.c **** 
  69:External/bootloader/Src/bootloader_io.c ****   HAL_StatusTypeDef status = HAL_FLASH_Unlock();
 174              		.loc 1 69 3 is_stmt 1 view .LVU31
 175              		.loc 1 69 30 is_stmt 0 view .LVU32
 176 0014 FFF7FEFF 		bl	HAL_FLASH_Unlock
 177              	.LVL11:
  70:External/bootloader/Src/bootloader_io.c ****   if (status)
 178              		.loc 1 70 3 is_stmt 1 view .LVU33
 179              		.loc 1 70 6 is_stmt 0 view .LVU34
 180 0018 50B9     		cbnz	r0, .L9
  71:External/bootloader/Src/bootloader_io.c ****     return (bootloader_status)status;
  72:External/bootloader/Src/bootloader_io.c **** 
  73:External/bootloader/Src/bootloader_io.c ****   status |= HAL_FLASH_Program(
 181              		.loc 1 73 3 is_stmt 1 view .LVU35
 182              		.loc 1 73 13 is_stmt 0 view .LVU36
 183 001a 0346     		mov	r3, r0
 184 001c 2146     		mov	r1, r4
 185 001e 2A46     		mov	r2, r5
 186 0020 0120     		movs	r0, #1
 187              	.LVL12:
 188              		.loc 1 73 13 view .LVU37
 189 0022 FFF7FEFF 		bl	HAL_FLASH_Program
 190              	.LVL13:
 191              		.loc 1 73 13 view .LVU38
 192 0026 0446     		mov	r4, r0
 193              	.LVL14:
  74:External/bootloader/Src/bootloader_io.c ****     FLASH_TYPEPROGRAM_HALFWORD, // uint16_t
  75:External/bootloader/Src/bootloader_io.c ****     address,
  76:External/bootloader/Src/bootloader_io.c ****     data
  77:External/bootloader/Src/bootloader_io.c ****   );
  78:External/bootloader/Src/bootloader_io.c **** 
  79:External/bootloader/Src/bootloader_io.c ****   status |= HAL_FLASH_Lock();
 194              		.loc 1 79 3 is_stmt 1 view .LVU39
 195              		.loc 1 79 13 is_stmt 0 view .LVU40
 196 0028 FFF7FEFF 		bl	HAL_FLASH_Lock
 197              	.LVL15:
 198              		.loc 1 79 10 discriminator 1 view .LVU41
 199 002c 2043     		orrs	r0, r0, r4
ARM GAS  /tmp/ccNW2L4w.s 			page 6


 200 002e C0B2     		uxtb	r0, r0
 201              	.LVL16:
  80:External/bootloader/Src/bootloader_io.c **** 
  81:External/bootloader/Src/bootloader_io.c ****   return (bootloader_status)status;
 202              		.loc 1 81 3 is_stmt 1 view .LVU42
 203              	.L9:
  82:External/bootloader/Src/bootloader_io.c **** }
 204              		.loc 1 82 1 is_stmt 0 view .LVU43
 205 0030 38BD     		pop	{r3, r4, r5, pc}
 206              	.LVL17:
 207              	.L11:
  67:External/bootloader/Src/bootloader_io.c **** 
 208              		.loc 1 67 12 view .LVU44
 209 0032 0420     		movs	r0, #4
 210              	.LVL18:
  67:External/bootloader/Src/bootloader_io.c **** 
 211              		.loc 1 67 12 view .LVU45
 212 0034 FCE7     		b	.L9
 213              	.L13:
 214 0036 00BF     		.align	2
 215              	.L12:
 216 0038 00280008 		.word	134227968
 217 003c FFFF0108 		.word	134348799
 218              		.cfi_endproc
 219              	.LFE70:
 221              		.section	.text.bootloader_io_erase,"ax",%progbits
 222              		.align	1
 223              		.global	bootloader_io_erase
 224              		.syntax unified
 225              		.thumb
 226              		.thumb_func
 228              	bootloader_io_erase:
 229              	.LVL19:
 230              	.LFB71:
  83:External/bootloader/Src/bootloader_io.c **** 
  84:External/bootloader/Src/bootloader_io.c **** bootloader_status bootloader_io_erase(
  85:External/bootloader/Src/bootloader_io.c ****   const uint32_t address,
  86:External/bootloader/Src/bootloader_io.c ****   const uint8_t pages_num
  87:External/bootloader/Src/bootloader_io.c **** )
  88:External/bootloader/Src/bootloader_io.c **** {
 231              		.loc 1 88 1 is_stmt 1 view -0
 232              		.cfi_startproc
 233              		@ args = 0, pretend = 0, frame = 24
 234              		@ frame_needed = 0, uses_anonymous_args = 0
  89:External/bootloader/Src/bootloader_io.c ****   if (!is_address_in_bounds(address) || !is_page_address(address))
 235              		.loc 1 89 3 view .LVU47
 236              	.LBB16:
 237              	.LBI16:
  10:External/bootloader/Src/bootloader_io.c **** {
 238              		.loc 1 10 13 view .LVU48
 239              	.LBB17:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 240              		.loc 1 12 3 view .LVU49
 241              	.LBE17:
 242              	.LBE16:
  88:External/bootloader/Src/bootloader_io.c ****   if (!is_address_in_bounds(address) || !is_page_address(address))
 243              		.loc 1 88 1 is_stmt 0 view .LVU50
ARM GAS  /tmp/ccNW2L4w.s 			page 7


 244 0000 70B5     		push	{r4, r5, r6, lr}
 245              	.LCFI1:
 246              		.cfi_def_cfa_offset 16
 247              		.cfi_offset 4, -16
 248              		.cfi_offset 5, -12
 249              		.cfi_offset 6, -8
 250              		.cfi_offset 14, -4
 251              	.LBB21:
 252              	.LBB18:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 253              		.loc 1 12 10 view .LVU51
 254 0002 174B     		ldr	r3, .L24
 255              	.LBE18:
 256              	.LBE21:
  88:External/bootloader/Src/bootloader_io.c ****   if (!is_address_in_bounds(address) || !is_page_address(address))
 257              		.loc 1 88 1 view .LVU52
 258 0004 0546     		mov	r5, r0
 259              	.LBB22:
 260              	.LBB19:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 261              		.loc 1 12 10 view .LVU53
 262 0006 9842     		cmp	r0, r3
 263              	.LBE19:
 264              	.LBE22:
  88:External/bootloader/Src/bootloader_io.c ****   if (!is_address_in_bounds(address) || !is_page_address(address))
 265              		.loc 1 88 1 view .LVU54
 266 0008 0E46     		mov	r6, r1
 267 000a 86B0     		sub	sp, sp, #24
 268              	.LCFI2:
 269              		.cfi_def_cfa_offset 40
 270              	.LBB23:
 271              	.LBB20:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 272              		.loc 1 12 10 view .LVU55
 273 000c 26D3     		bcc	.L20
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 274              		.loc 1 12 10 discriminator 1 view .LVU56
 275 000e 154B     		ldr	r3, .L24+4
  14:External/bootloader/Src/bootloader_io.c ****   );
 276              		.loc 1 14 13 view .LVU57
 277 0010 821C     		adds	r2, r0, #2
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 278              		.loc 1 12 10 discriminator 1 view .LVU58
 279 0012 9A42     		cmp	r2, r3
 280 0014 22D2     		bcs	.L20
 281              	.LVL20:
  12:External/bootloader/Src/bootloader_io.c ****     address < APP_START_ADDRESS || 
 282              		.loc 1 12 10 discriminator 1 view .LVU59
 283              	.LBE20:
 284              	.LBE23:
 285              	.LBB24:
 286              	.LBI24:
  18:External/bootloader/Src/bootloader_io.c **** {
 287              		.loc 1 18 13 is_stmt 1 view .LVU60
 288              	.LBB25:
  21:External/bootloader/Src/bootloader_io.c ****     address % 1024 == 0|| 
 289              		.loc 1 21 3 view .LVU61
ARM GAS  /tmp/ccNW2L4w.s 			page 8


  22:External/bootloader/Src/bootloader_io.c ****     address + 1024 < FLASH_BANK1_END // flash bank1 end
 290              		.loc 1 22 13 is_stmt 0 view .LVU62
 291 0016 C0F30902 		ubfx	r2, r0, #0, #10
  22:External/bootloader/Src/bootloader_io.c ****     address + 1024 < FLASH_BANK1_END // flash bank1 end
 292              		.loc 1 22 24 view .LVU63
 293 001a 1AB1     		cbz	r2, .L16
  23:External/bootloader/Src/bootloader_io.c ****   );
 294              		.loc 1 23 13 view .LVU64
 295 001c 00F58062 		add	r2, r0, #1024
  22:External/bootloader/Src/bootloader_io.c ****     address + 1024 < FLASH_BANK1_END // flash bank1 end
 296              		.loc 1 22 24 discriminator 2 view .LVU65
 297 0020 9A42     		cmp	r2, r3
 298 0022 1BD2     		bcs	.L20
 299              	.L16:
 300              	.LVL21:
  22:External/bootloader/Src/bootloader_io.c ****     address + 1024 < FLASH_BANK1_END // flash bank1 end
 301              		.loc 1 22 24 discriminator 2 view .LVU66
 302              	.LBE25:
 303              	.LBE24:
  90:External/bootloader/Src/bootloader_io.c ****     return BOOTLOADER_BOUNDS_ERROR;
  91:External/bootloader/Src/bootloader_io.c **** 
  92:External/bootloader/Src/bootloader_io.c ****   HAL_StatusTypeDef status = HAL_FLASH_Unlock();
 304              		.loc 1 92 3 is_stmt 1 view .LVU67
 305              		.loc 1 92 30 is_stmt 0 view .LVU68
 306 0024 FFF7FEFF 		bl	HAL_FLASH_Unlock
 307              	.LVL22:
  93:External/bootloader/Src/bootloader_io.c **** 
  94:External/bootloader/Src/bootloader_io.c ****   FLASH_EraseInitTypeDef erase_init_struct = (FLASH_EraseInitTypeDef){
 308              		.loc 1 94 26 view .LVU69
 309 0028 0023     		movs	r3, #0
 310 002a 0122     		movs	r2, #1
  92:External/bootloader/Src/bootloader_io.c **** 
 311              		.loc 1 92 30 view .LVU70
 312 002c 0446     		mov	r4, r0
 313              	.LVL23:
 314              		.loc 1 94 3 is_stmt 1 view .LVU71
  95:External/bootloader/Src/bootloader_io.c ****     .TypeErase = FLASH_TYPEERASE_PAGES,
  96:External/bootloader/Src/bootloader_io.c ****     .Banks = FLASH_BANK_1,
  97:External/bootloader/Src/bootloader_io.c ****     .PageAddress = address,
  98:External/bootloader/Src/bootloader_io.c ****     .NbPages = pages_num
  99:External/bootloader/Src/bootloader_io.c ****   };
 100:External/bootloader/Src/bootloader_io.c ****   uint32_t page_error = 0x0U;
 101:External/bootloader/Src/bootloader_io.c **** 
 102:External/bootloader/Src/bootloader_io.c ****   status |= HAL_FLASHEx_Erase(&erase_init_struct, &page_error);
 315              		.loc 1 102 13 is_stmt 0 view .LVU72
 316 002e 01A9     		add	r1, sp, #4
 317 0030 02A8     		add	r0, sp, #8
  94:External/bootloader/Src/bootloader_io.c ****     .TypeErase = FLASH_TYPEERASE_PAGES,
 318              		.loc 1 94 26 view .LVU73
 319 0032 CDE90232 		strd	r3, r2, [sp, #8]
 100:External/bootloader/Src/bootloader_io.c **** 
 320              		.loc 1 100 12 view .LVU74
 321 0036 0193     		str	r3, [sp, #4]
  94:External/bootloader/Src/bootloader_io.c ****     .TypeErase = FLASH_TYPEERASE_PAGES,
 322              		.loc 1 94 26 view .LVU75
 323 0038 CDE90456 		strd	r5, r6, [sp, #16]
 100:External/bootloader/Src/bootloader_io.c **** 
ARM GAS  /tmp/ccNW2L4w.s 			page 9


 324              		.loc 1 100 3 is_stmt 1 view .LVU76
 325              		.loc 1 102 3 view .LVU77
 326              		.loc 1 102 13 is_stmt 0 view .LVU78
 327 003c FFF7FEFF 		bl	HAL_FLASHEx_Erase
 328              	.LVL24:
 103:External/bootloader/Src/bootloader_io.c **** 
 104:External/bootloader/Src/bootloader_io.c ****   if (page_error != ~0x0)
 329              		.loc 1 104 6 view .LVU79
 330 0040 019B     		ldr	r3, [sp, #4]
 102:External/bootloader/Src/bootloader_io.c **** 
 331              		.loc 1 102 10 discriminator 1 view .LVU80
 332 0042 2043     		orrs	r0, r0, r4
 333              		.loc 1 104 6 view .LVU81
 334 0044 0133     		adds	r3, r3, #1
 102:External/bootloader/Src/bootloader_io.c **** 
 335              		.loc 1 102 10 discriminator 1 view .LVU82
 336 0046 C4B2     		uxtb	r4, r0
 337              	.LVL25:
 338              		.loc 1 104 3 is_stmt 1 view .LVU83
 339              		.loc 1 104 6 is_stmt 0 view .LVU84
 340 0048 03D0     		beq	.L17
 105:External/bootloader/Src/bootloader_io.c ****     return status |= BOOTLOADER_FLASH_PAGE_ERROR; 
 341              		.loc 1 105 5 is_stmt 1 view .LVU85
 342              		.loc 1 105 19 is_stmt 0 view .LVU86
 343 004a 44F00500 		orr	r0, r4, #5
 344              	.LVL26:
 345              	.L15:
 106:External/bootloader/Src/bootloader_io.c **** 
 107:External/bootloader/Src/bootloader_io.c ****   status |= HAL_FLASH_Lock();
 108:External/bootloader/Src/bootloader_io.c **** 
 109:External/bootloader/Src/bootloader_io.c ****   return status;
 110:External/bootloader/Src/bootloader_io.c **** }
 346              		.loc 1 110 1 view .LVU87
 347 004e 06B0     		add	sp, sp, #24
 348              	.LCFI3:
 349              		.cfi_remember_state
 350              		.cfi_def_cfa_offset 16
 351              		@ sp needed
 352 0050 70BD     		pop	{r4, r5, r6, pc}
 353              	.LVL27:
 354              	.L17:
 355              	.LCFI4:
 356              		.cfi_restore_state
 107:External/bootloader/Src/bootloader_io.c **** 
 357              		.loc 1 107 3 is_stmt 1 view .LVU88
 107:External/bootloader/Src/bootloader_io.c **** 
 358              		.loc 1 107 13 is_stmt 0 view .LVU89
 359 0052 FFF7FEFF 		bl	HAL_FLASH_Lock
 360              	.LVL28:
 107:External/bootloader/Src/bootloader_io.c **** 
 361              		.loc 1 107 10 discriminator 1 view .LVU90
 362 0056 2043     		orrs	r0, r0, r4
 363 0058 C0B2     		uxtb	r0, r0
 364              	.LVL29:
 109:External/bootloader/Src/bootloader_io.c **** }
 365              		.loc 1 109 3 is_stmt 1 view .LVU91
 109:External/bootloader/Src/bootloader_io.c **** }
ARM GAS  /tmp/ccNW2L4w.s 			page 10


 366              		.loc 1 109 10 is_stmt 0 view .LVU92
 367 005a F8E7     		b	.L15
 368              	.LVL30:
 369              	.L20:
  90:External/bootloader/Src/bootloader_io.c **** 
 370              		.loc 1 90 12 view .LVU93
 371 005c 0420     		movs	r0, #4
 372              	.LVL31:
  90:External/bootloader/Src/bootloader_io.c **** 
 373              		.loc 1 90 12 view .LVU94
 374 005e F6E7     		b	.L15
 375              	.L25:
 376              		.align	2
 377              	.L24:
 378 0060 00280008 		.word	134227968
 379 0064 FFFF0108 		.word	134348799
 380              		.cfi_endproc
 381              	.LFE71:
 383              		.text
 384              	.Letext0:
 385              		.file 2 "/usr/local/src/arm-gnu-toolchain-13.2/arm-none-eabi/include/machine/_default_types.h"
 386              		.file 3 "/usr/local/src/arm-gnu-toolchain-13.2/arm-none-eabi/include/sys/_stdint.h"
 387              		.file 4 "External/bootloader/Inc/bootloader_defs.h"
 388              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 389              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 390              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 391              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_flash_ex.h"
 392              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 393              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_flash.h"
 394              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
ARM GAS  /tmp/ccNW2L4w.s 			page 11


DEFINED SYMBOLS
                            *ABS*:00000000 bootloader_io.c
     /tmp/ccNW2L4w.s:19     .text.bootloader_io_read:00000000 $t
     /tmp/ccNW2L4w.s:25     .text.bootloader_io_read:00000000 bootloader_io_read
     /tmp/ccNW2L4w.s:51     .text.bootloader_io_read:00000010 $d
     /tmp/ccNW2L4w.s:56     .text.bootloader_io_write:00000000 $t
     /tmp/ccNW2L4w.s:62     .text.bootloader_io_write:00000000 bootloader_io_write
     /tmp/ccNW2L4w.s:88     .text.bootloader_io_write:00000010 $d
     /tmp/ccNW2L4w.s:93     .text.bootloader_io_get_dev_id:00000000 $t
     /tmp/ccNW2L4w.s:99     .text.bootloader_io_get_dev_id:00000000 bootloader_io_get_dev_id
     /tmp/ccNW2L4w.s:114    .text.bootloader_io_program:00000000 $t
     /tmp/ccNW2L4w.s:120    .text.bootloader_io_program:00000000 bootloader_io_program
     /tmp/ccNW2L4w.s:216    .text.bootloader_io_program:00000038 $d
     /tmp/ccNW2L4w.s:222    .text.bootloader_io_erase:00000000 $t
     /tmp/ccNW2L4w.s:228    .text.bootloader_io_erase:00000000 bootloader_io_erase
     /tmp/ccNW2L4w.s:378    .text.bootloader_io_erase:00000060 $d

UNDEFINED SYMBOLS
HAL_UART_Receive
bootloader_uart
HAL_UART_Transmit
HAL_GetDEVID
HAL_FLASH_Unlock
HAL_FLASH_Program
HAL_FLASH_Lock
HAL_FLASHEx_Erase
